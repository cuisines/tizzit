<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">
<web-app>
	<distributable/>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
      classpath:applicationContext-cocoon21.xml 
    </param-value>
  </context-param>

	<filter>
	  <filter-name>springSecurityFilterChain</filter-name>
	  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
	</filter>
		
	<filter-mapping>
		<filter-name>springSecurityFilterChain</filter-name>
		<url-pattern>/remote/*</url-pattern>
	</filter-mapping>
	
	<listener>
		<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>
	
	<servlet>
		<servlet-name>remote</servlet-name>
		<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
		<init-param>
			<param-name>contextConfigLocation</param-name>
			<param-value>
				classpath:applicationContext-export-remoteServices.xml
				<!-- web-contextConfigLocations merge-point -->
			</param-value>
		</init-param>
		<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet>
		<servlet-name>Cocoon</servlet-name>
		<display-name>Cocoon</display-name>
		<description>Cocoon</description>
		<servlet-class>org.apache.cocoon.servlet.CocoonServlet</servlet-class>
		<init-param>
			<param-name>init-classloader</param-name>
			<param-value>false</param-value>
		</init-param>
		<!--
      This parameter allows to set system properties
    -->
		<!--
    <init-param>
      <param-name>force-property</param-name>
      <param-value>
        org.apache.commons.logging.Log=org.apache.commons.logging.impl.LogKitLogger
      </param-value>
    </init-param>
    -->
		<!--
      This parameter points to the main configuration file for Cocoon.
      Note that the path is specified in absolute notation but it will be
      resolved relative to the servlets webapp context path
    -->
		<init-param>
			<param-name>configurations</param-name>
			<param-value>/WEB-INF/cocoon.xconf</param-value>
		</init-param>
		<init-param>
			<param-name>servlet-logger</param-name>
			<param-value>access</param-value>
		</init-param>
		<init-param>
			<param-name>cocoon-logger</param-name>
			<param-value>core</param-value>
		</init-param>
		<init-param>
			<param-name>log-level</param-name>
			<param-value>WARN</param-value>
		</init-param>
		<!--
      The forbidden level for deprectation messages. DEBUG forbids all deprecations (strict mode)
      and FATAL_ERROR allows all (tolerant mode). Default is ERROR, allowing up to WARN.
      See org.apache.util.Deprecation for more details.
    -->
		<init-param>
			<param-name>forbidden-deprecation-level</param-name>
			<param-value>ERROR</param-value>
		</init-param>
		<init-param>
			<param-name>logger-class</param-name>
			<param-value>org.apache.avalon.excalibur.logger.Log4JLoggerManager</param-value>
		</init-param>
		<init-param>
			<param-name>allow-reload</param-name>
			<param-value>yes</param-value>
		</init-param>
		<init-param>
			<param-name>enable-uploads</param-name>
			<param-value>true</param-value>
		</init-param>
		<init-param>
			<param-name>autosave-uploads</param-name>
			<param-value>true</param-value>
		</init-param>
		<init-param>
			<param-name>overwrite-uploads</param-name>
			<param-value>rename</param-value>
		</init-param>
		<init-param>
			<param-name>show-cocoon-version</param-name>
			<param-value>false</param-value>
		</init-param>
		<init-param>
			<param-name>manage-exceptions</param-name>
			<param-value>true</param-value>
		</init-param>
		<init-param>
			<param-name>enable-instrumentation</param-name>
			<param-value>false</param-value>
		</init-param>
		<init-param>
			<param-name>container-encoding</param-name>
			<param-value>ISO-8859-1</param-value>
		</init-param>
		<init-param>
			<param-name>form-encoding</param-name>
			<param-value>UTF-8</param-value>
		</init-param>
		<load-on-startup>2</load-on-startup>
	</servlet>
	<!-- mappings -->
	<servlet-mapping>
		<servlet-name>remote</servlet-name>
		<url-pattern>/remote/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>Cocoon</servlet-name>
		<url-pattern>/</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>Cocoon</servlet-name>
		<url-pattern>*.jsp</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>Cocoon</servlet-name>
		<url-pattern>*.html</url-pattern>
	</servlet-mapping>
	<mime-mapping>
		<extension>css</extension>
		<mime-type>text/css</mime-type>
	</mime-mapping>
	<mime-mapping>
		<extension>xml</extension>
		<mime-type>text/xml</mime-type>
	</mime-mapping>
	<mime-mapping>
		<extension>xsl</extension>
		<mime-type>text/xml</mime-type>
	</mime-mapping>
	<mime-mapping>
		<extension>xconf</extension>
		<mime-type>text/xml</mime-type>
	</mime-mapping>
	<mime-mapping>
		<extension>xmap</extension>
		<mime-type>text/xml</mime-type>
	</mime-mapping>
	<mime-mapping>
		<extension>ent</extension>
		<mime-type>text/plain</mime-type>
	</mime-mapping>
	<mime-mapping>
		<extension>grm</extension>
		<mime-type>text/plain</mime-type>
	</mime-mapping>
</web-app>
